<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta charset="utf-8">
<title>Meddy</title>
<style media="screen">
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section,summary{display:block;}audio,canvas,progress,video{display:inline-block;vertical-align:baseline;}audio:not([controls]){display:none;height:0;}[hidden],template{display:none;}a{background-color:transparent;}a:active,a:hover{outline:0;}abbr[title]{border-bottom:1px dotted;}b,strong{font-weight:bold;}dfn{font-style:italic;}h1{font-size:2em;margin:0.67em 0;}mark{background:#ff0;color:#000;}small{font-size:80%;}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline;}sup{top:-0.5em;}sub{bottom:-0.25em;}img{border:0;}svg:not(:root){overflow:hidden;}figure{margin:1em 40px;}hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0;}code,kbd,pre,samp{font-family:APLFont;font-size:1em;}button,input,optgroup,select,textarea{color:inherit;font:inherit;margin:0;}button{overflow:visible;}button,select{text-transform:none;}button,html input[type="button"], input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer;}button[disabled],html input[disabled]{cursor:default;}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0;}input{line-height:normal;}input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0;}input[type="number"]::-webkit-inner-spin-button,input[type="number"]::-webkit-outer-spin-button{height:auto;}input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box;}input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none;}fieldset{border:1px solid #c0c0c0;margin:0 2px;padding:0.35em 0.625em 0.75em;}legend{border:0;padding:0;}textarea{overflow:auto;}optgroup{font-weight:bold;}table{border-collapse:collapse;border-spacing:0;}td,th{padding:0;}body{margin:0pt 0pt 0pt 0pt;font-family:"Bookman Old Style", serif;background-color:#fdfdfd;font-size:18px;line-height:1.4;max-width:900px;padding:15px;}h1, h2, h3, h4, h5, h6{color:#868686;font-weight:800;padding-left:0;}h1, h2, h3, h4, p{margin-bottom:16px;}h1{font-size:32px;margin:5px 0 20px 0;}h1 > code, h2 > code, h3 > code, h4 > code, h5 > code, h6 > code{font-size:100%;background-color:inherit;}h2{font-size:26px;margin:10px 0 10px 0;padding-top:10px;border-bottom:1px solid Silver;}h3{margin:0; margin-top:10px;font-size:22px;}h4{font-size:18px;margin:0;margin-top:10px;}h5, h6{font-size:16px;margin:0;margin-top:12px;padding:0;}a{color:#0099ff;margin:0;padding:0;vertical-align:baseline;}a:visited{color:purple;}a.autoheader_anchor{text-decoration:none;}ul{list-style-type:disc;}ul, ol{padding:0;margin:0;}li > ul, ol{padding-bottom:0;}li{line-height:1.3;margin-left:25px;margin-bottom:10px;}ul > li{margin-left:20px;}li ul{margin-left:10px;}li ul{margin-left:5px;}li p{padding:1px 0 0 0; margin:10px 0 5px 0;line-height:1.3;}p, ul, ol{line-height:1.3;padding:8px 0 0 0;margin:0;color:#292929;}pre{overflow:auto;padding:10px 5px;margin:10px 0 10px 0 !important;white-space:pre-wrap;background-color:#faebd7;color:#3e3e3e;border:1px Silver dashed;display:block;font-family:APLFont, monospace;font-weight:400;}pre > code{line-height:1.2;border:0;padding:0;margin:0;background-color:inherit;color:inherit;font-weight:inherit;}li > pre{left-margin:0;}nav code{background-color:inherit;}code{font-family:APLFont, monospace;background-color:#efefef;color:Black;font-weight:800;line-height:1.2;font-size:16px;margin:0;color:#950000;padding:0 3px;}tbody tr:nth-child(odd){background-color:#f5f5f5;}th, td{padding:3px 10px;}table{border-color:Black;background-color:#ebebeb;margin:20px 0 20px 0;border:2px black;border-collapse:collapse;font-family:APLFont;font-size:16px;line-height:1.2;border:1pt solid Gray;}li > table{margin:10px 0 10px 0;}tr{margin:20px;}th{font-weight:bold;}tfoot td{font-weight:bold;}blockquote{border-left:5px solid silver;padding-left:5px;margin:15px 5px 15px 10px;}blockquote ul li{margin-left:215px;}blockquote ol li{margin-left:25px;}li > blockquote{margin-left:0;}nav{background-color:#f5f5f5;border:1px solid Black;padding:10px;margin:10px;margin-right:0;box-shadow:5px 5px 5px Gray; float:right;width:auto;}nav code{font-size:80%;}nav#main_nav{position:fixed;top:0;right:10px;float:none;}nav ul{list-style-type:none; margin:0 0 2px 0;padding:0;}nav a:visited{ color:black;}nav ul li{margin-bottom:0px;}nav li p{margin:0;padding:0;line-height:1;margin:0;padding:0;}nav li{font-size:11px;line-height:1.3;padding:0;margin-top:0;margin-bottom:0;margin-left:15px;}nav p{font-weight:bold;font-size:75%;padding-top:0;}dl{margin-top:0.1em;margin-bottom:0.1em;}dt{margin-top:0.75em;margin-bottom:0.1em;font-weight:800;}label#hide_toc_label{font-size:80%;}.toc-container{position:relative;height:auto;}[type="checkbox"]{position:absolute;left:-9999px;}label{display:block;width:100%;height:1.1em;cursor:pointer;top:0;padding-left:10pt;}label:before{content:'Table of contents (Show)';font-weight:bold;font-size:90%;padding-bottom:0pt;}[type="checkbox"] ~ div{display:none;}[type="checkbox"]:checked ~ div{display:block;margin-top:10pt;}[type="checkbox"]:checked + label{top:100%;}[type="checkbox"]:checked + label:before{content:'Table of contents (Hide)';}.print_only{display:none;}div#footnotes_div p{line-height:1; padding-bottom:0;padding-top:0;}div#footnotes_div ol{padding-top:0;}@font-face{font-family:"APLFont";src:local("APL385 Unicode"), url("http://misc.aplteam.com/apl385.ttf") format("truetype");}
</style>
<style media="print">
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;}body{-webkit-print-color-adjust:exact;}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section,summary{display:block;}audio,canvas,progress,video{display:inline-block;vertical-align:baseline;}audio:not([controls]){display:none;height:0;}[hidden],template{display:none;}a{background-color:transparent;}a{color:black !important;text-decoration:none;}a:active,a:hover{color:black;outline:0;}b,strong{font-weight:bold;}dfn{font-style:italic;}h1{margin:0.67em 0;}mark{background:#ff0;color:#000;}small{font-size:80%;}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline;}sup{top:-0.5em;}sub{bottom:-0.25em;}img{border:0;}svg:not(:root){overflow:hidden;}figure{margin:1em 40pt;}hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0;}code,kbd,pre,samp{font-family:monospace, monospace;font-size:1em;}button,input,optgroup,select,textarea{color:inherit;font:inherit;margin:0;}button{overflow:visible;}button,select{text-transform:none;}button,html input[type="button"], input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer;}button[disabled],html input[disabled]{cursor:default;}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0;}input{line-height:normal;}input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0;}input[type="number"]::-webkit-inner-spin-button,input[type="number"]::-webkit-outer-spin-button{height:auto;}input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box;}input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none;}fieldset{border:1pt solid #c0c0c0;margin:0 2pt;padding:0.35em 0.625em 0.75em;}legend{border:0;padding:0;}textarea{overflow:auto;}optgroup{font-weight:bold;}table{border-collapse:collapse;border-spacing:0px;}td, th{padding:2pt 8pt;}body{margin:10pt 0 0 0;font-family:"Bookman Old Style", serif;background-color:#fdfdfd;font-size:9pt;line-height:1.2;max-width:auto;padding:15pt;}h1, h2, h3, h4 h5 h6{color:black;font-weight:800;padding-left:0;margin:5pt 0 0 0;padding:0}h1, h2, h3, h4, p{margin-bottom:5pt;}h1 > code, h2 > code, h3 > code, h4 > code, h5 > code, h6 > code{font-size:100%;}h1{font-size:150%;margin-top:5pt;}h2{font-size:135%;margin:15pt 0 10pt 0;border-bottom:1pt solid Silver;}h3{font-size:125%;}h3, h4 > pre{margin-bottom:8pt;}h4{font-size:115%;}h5{font-size:105%;padding-bottom:0;margin-bottom:0;}h5{font-size:100%;}a{color:#0099ff;margin:0;padding:0;vertical-align:baseline;}a.autoheader_anchor{text-decoration:none;}ul{list-style-type:square;}ul, ol{padding:0;margin:0;}li > ul, ol{padding-bottom:0;}li{line-height:1.3;margin-left:13pt;margin-bottom:5pt;}ul > li{margin-left:10pt;}li ul{margin-left:5pt;}li ul{margin-left:3pt;}li p{padding:1pt 0 0 0; margin:5pt 0 3pt 0;line-height:1.3;}p, ul, ol{line-height:1.3;padding:4pt 0 0 0;margin:0;color:#292929;}pre{padding:3pt;margin:5px 0;white-space:pre-wrap;background-color:#f8f8f8;border:1pt Silver solid;display:block;font-family:APLFont, monospace;font-weight:800;overflow:auto;}pre code{ background-color:#f0f0f0; color:Black; padding:0; margin:0 0 -6pt 0; line-height:1.1; border:0;}code{font-family:APLFont, monospace;font-weight:800;line-height:1.2;font-size:8pt;color:#950000;padding:2pt 1pt;}tbody tr:nth-child(odd){background-color:#fafafa;}th, td{padding:1pt 5pt;}table{background-color:#f1f1f1;margin:20pt 0;font-family:APLFont;font-size:8pt;padding:3pt 5pt;border:1pt solid silver;page-break-inside:avoid;}li > table{margin:10pt 0 10pt 0;}tr{margin:20pt;}th{font-weight:bold;}tfoot td{font-weight:bold;}blockquote{border-left:5pt solid silver;padding-left:5pt;margin:8pt 3pt 8pt 8pt;}nav{background-color:#f8f8f8;border:1pt solid Gray;width:auto; float:right;padding:5pt 5pt 5pt 0;margin:5pt 0 5pt 5pt;}nav *{font-size:75%;}nav ul{list-style-type:none; margin:0 0 2px 0;padding:0;}nav ul li{margin-bottom:0px;}nav li p{margin:0;padding:0;line-height:1;margin:0;padding:0;}nav li{font-size:8pt;line-height:1;padding:0;margin-top:0;margin-bottom:0;margin-left:15px;}dl{margin-top:0.1em;margin-bottom:0.1em;}dt{margin-top:0.1em;margin-bottom:0.75em;font-weight:800;}label#hide_toc_label{font-size:65%;}.toc-container{position:relative;height:auto;margin-top:10pt;}[type="checkbox"]{display:none;}label{display:block;width:100%;height:1.1em;top:0;padding-left:10pt;}label:before{content:'Table of contents (Show)';font-weight:bold;font-size:140%;padding-bottom:10pt;}a.external_link::before{content:" ğŸŒ";}a.bookmark_link::before{content:" â¯";}a.bookmark_link{font-style:italic;}a.mailto_link::before{content:" âœ‰"}nav a.bookmark_link{font-style:normal;}nav p{margin-left:10pt;font-weight:bold;font-size:10pt;}nav a.bookmark_link::before{content:"";}div#footnotes_div a::before{content:"";}div#footnotes_div a{font-style:normal;}@font-face{font-family:"APLFont";src:local("APL385 Unicode"), url("http://misc.aplteam.com/apl385.ttf") format("truetype");}
</style>
<meta name="author" content="mkrom">
</head>
<body>
<div class="h_tag">
<a href="#Array-oriented-Functional-Programming-with-Dyalog" id="Array-oriented-Functional-Programming-with-Dyalog" class="autoheader_anchor">
<h1>Array-oriented Functional Programming with Dyalog</h1>
</a>
</div>
<div class="h_tag">
<a href="#Workshop-at-East-China-University-of-Science-and-Technology" id="Workshop-at-East-China-University-of-Science-and-Technology" class="autoheader_anchor">
<h2>Workshop at East China University of Science and Technology</h2>
</a>
</div>
<div class="h_tag">
<a href="#July-5th-2018" id="July-5th-2018" class="autoheader_anchor">
<h2>July 5th, 2018</h2>
</a>
</div>
<p>Materials available at <a href="https://github.com/mkromberg/ECUST" class="external_link">https://github.com/mkromberg/ECUST</a></p>
<div class="h_tag">
<a href="#Morten-Kromberg" id="Morten-Kromberg" class="autoheader_anchor">
<h2>Morten Kromberg</h2>
</a>
</div>
<p>####(With thanks to Jay Foad, Roger Hui and John Scholes)</p>
<p>The workshop assumes no prior knowledge of APL.</p>
<p>Prerequisites: It would help if attendees installed Dyalog on their laptops prior to the workshop - though we will spend a little time at the start of the day making sure everyone is able to use APL.</p>
<p>The format will include many short exercises. Feedback and discussion will be encouraged throughout.</p>
<div class="h_tag">
<a href="#Documentation" id="Documentation" class="autoheader_anchor">
<h2>Documentation</h2>
</a>
</div>
<p>Supporting documentation and materials are available online:</p>
<ul>
<li><a href="http://tryapl.org" class="external_link">http://tryapl.org</a> see the â€œresourcesâ€ tab</li>
<li><a href="http://help.dyalog.com" class="external_link">http://help.dyalog.com</a> online help</li>
<li><a href="http://doc.dyalog.com" class="external_link">http://docs.dyalog.com</a> manuals etc</li>
<li><a href="http://www.dyalog.com/mastering-dyalog-apl.htm" class="external_link">http://http://www.dyalog.com/mastering-dyalog-apl.htm</a> Introduction to Dyalog APL by Bernard Legrand</li>
<li>Google: Try e.g. <a href="https://www.google.co.in/?q=dyalog+apl+rank+operator" class="external_link">https://www.google.co.in/?q=dyalog+apl+rank+operator</a></li>
</ul>
<div class="h_tag">
<a href="#Morning" id="Morning" class="autoheader_anchor">
<h1>Morning</h1>
</a>
</div>
<ul>
<li>Installing Dyalog and keyboard layouts (http://dyalog.com/apl-font-keyboard.htm).</li>
<li>Entering APL glyphs from the keyboard:
<ul>
<li>Click on language bar (hover for help)</li>
<li>Use double back-tick with auto-complete (Mac+Linux/RIDE only)</li>
<li>Use back-tick + letter (Mac+Linux/RIDE only)</li>
<li>Use modifier keys</li>
</ul></li>
<li>Configuration: please use <code>]box on</code>.</li>
<li>TryAPL (http://tryapl.org/) has a floating soft keyboard, or you can use the IME (Windows) or Mac &amp; Linux keyboard layouts.</li>
</ul>
<div class="h_tag">
<a href="#Introduction" id="Introduction" class="autoheader_anchor">
<h2>Introduction</h2>
</a>
</div>
<p>Powerpoint slides (1-8):</p>
<ul>
<li>How APL evolved from a mathematical notation.</li>
<li>Started as â€œIverson notationâ€, used on the blackboard for teaching.</li>
<li>â€œA Programming Languageâ€ book published in 1962, long before it was implemented on any computer. (<em>Program</em> just meant <em>algorithm</em>.)</li>
<li>Used to formally describe the System/360 at IBM.</li>
<li>First interpreter for the 360 in 1966, developed by Ken, Larry Breed, Adin Falkoff, Dick Lathwell and Roger Moore.</li>
<li>Notation had to be linearised.</li>
<li>Most other languages (e.g. Fortran) grew from the machine up, not from maths down.</li>
</ul>
<div class="h_tag">
<a href="#First-impressions" id="First-impressions" class="autoheader_anchor">
<h2>First impressions</h2>
</a>
</div>
<p>meanâ†{(+âŒ¿âµ)Ã·â‰¢âµ}</p>
<ul>
<li>The character set: APL uses special symbols.</li>
<li>Simple regular syntax.</li>
<li>No reserved words in the language.</li>
<li>Array programming is a paradigm in its own right.</li>
<li>There are other APLs (APL2, NARS2000, GNU APL, NGN APL, ELI, etc), generally not completely compatible despite an ISO standardâ€¦</li>
<li>and other languages in the family (A, A+, Nial, J, K etc).</li>
</ul>
<p>Array languages tend to share three features:</p>
<ul>
<li>terse</li>
<li>symbolic (not wordy)</li>
<li>high-order functions</li>
</ul>
<blockquote>
<p>The only program which stands a chance of being correct is a short one â€“Arthur Whitney</p>
</blockquote>
<ul>
<li>Primitives are carefully chosen; e.g. you get Grade instead of Sort, which enables <code>names[â‹ages]</code>.</li>
</ul>
<div class="h_tag">
<a href="#Syntax-functions-arguments-and-naming" id="Syntax-functions-arguments-and-naming" class="autoheader_anchor">
<h2>Syntax: functions, arguments and naming</h2>
</a>
</div>
<ul>
<li>Functions are prefix or infix (<em>monadic</em> or <em>dyadic</em>) e.g. <code>-</code> stands for negate or subtract respectively.</li>
<li>Unlike many languages (e.g. C, Java), this goes for user-defined functions too.</li>
<li><em>All</em> functions associate right: <code>3Ã—2+1</code> is <code>3Ã—(2+1)</code>.</li>
</ul>
<p><strong>Exercise 01:</strong> go through quickly as a group, introducing some scalar functions:</p>
<p>What do these expressions evaluate to?</p>
<p>3+2 3<em>2 â * is not multiplication! 3Ã—2 9</em>0.5 â square root 6Ã·2 5-3-1 â not 1 1 2 3 -1 + 2â not 1 Â¯1 + 2 1 + 2 3 1 2 + 3 1 2 + 3 4 1 2 + 3 4 5 â errors: see later 1Ã·2 3Ã·4 1 (2 3) + (4 5) 6 â as if (1 1)(2 3) + (4 5)(6 6)</p>
<ul>
<li>Conformability rules for scalar functions: vectors must have same length, or either argument can be a scalar (â€œscalar extensionâ€)</li>
<li>Assignment uses the left arrow to name an array, <code>xâ†3</code>.</li>
</ul>
<p><strong>Exercise 02</strong> (introducing assignment):</p>
<p>What do these expressions do?</p>
<p>xâ†3 â result of assignment isn't printed x+x y+(yâ†4) â R-to-L execution guaranteed here, pass through result (x y z)â†1 2 3 (x y)â†y x</p>
<p><strong>Exercise 03</strong> (first sight of a non-scalar function):</p>
<p>Try these expressions:</p>
<p>5=2+3 â not â€œtrueâ€ but â€œ1â€ Aâ†â³3 A=1 2 3 Aâ‰¡1 2 3 â non-scalar function</p>
<div class="h_tag">
<a href="#Arrays" id="Arrays" class="autoheader_anchor">
<h2>Arrays</h2>
</a>
</div>
<ul>
<li>In APL â€œeverything is an arrayâ€, but whatâ€™s an array?
<ul>
<li>Rectangular collection of items,</li>
<li>arranged along zero or more orthogonal axes,</li>
<li>of numbers, characters and arrays</li>
</ul></li>
<li><em>All</em> primitives work on arrays and return arrays.</li>
<li>Strings are just vectors of characters.</li>
</ul>
<p><strong>Exercise 04</strong> (introducing some structural primitives):</p>
<p>Try:</p>
<p>â´1 2 3 â´'JAY' â³4 â´â³4 âŒ½â³4 4â†‘'BANGALORE' Â¯4â†‘'BANGALORE' â´(1 2 3)(4 5 6) â´'Morten' 'Kromberg' 5â´'JAY' â introduce Reshape Aâ†3 3â´â³9 A â display is â€œrow majorâ€ â´A â´â´A âŒ½A âŠ–A â discuss rank operator later ,A 3 3â´'APL' 2 3 4â´â³24 â display is in planes Bâ†2 3 4 5 6 7â´99 â N.B. don't display this! â´B â´â´B</p>
<ul>
<li>Other languages have scalars and arrays, but in APL there is no such distinction.</li>
<li>Every array has a rank. What is the rank of a scalar? Try it! What is the shape of a scalar? Compare with <code>â³0</code> and <code>â¬</code>.</li>
<li>How many items in a rank-0 array? Try <code>Ã—/â¬</code>.</li>
<li>APL <em>recycles</em> the word â€œscalarâ€ to mean â€œrank-zero arrayâ€.</li>
<li>Why is a scalar an array? Because <em>everything</em> is an array! And it helps with consistency: reduction of matrix is vector, of vector is scalar.</li>
<li>(Muse: â€œthere's no access to the moteâ€. See Trenchard More's papers on â€œNested Rectangular Arraysâ€.)</li>
<li>Using the array as the fundamental type means that performance can be very good, even though it's interpreted.</li>
</ul>
<div class="h_tag">
<a href="#Workspaces-and-scripts" id="Workspaces-and-scripts" class="autoheader_anchor">
<h2>Workspaces and scripts</h2>
</a>
</div>
<p>Powerpoint (9-10)</p>
<ul>
<li>Introduce )save and )load as a way to take a snapshot of the VM</li>
<li>And ]save and ]load to work with functions as text files</li>
</ul>
<div class="h_tag">
<a href="#Numbers" id="Numbers" class="autoheader_anchor">
<h2>Numbers</h2>
</a>
</div>
<ul>
<li>APL presents the illusion that â€œa number is just a numberâ€.</li>
<li>Users don't have to think about data types.</li>
<li>Automatic promotion on overflow; occasional demotion on heap compaction / garbage collection.</li>
</ul>
<p><strong>Exercise 06</strong> (more scalar arithmetic):</p>
<p>Try:</p>
<p>0 0 1 1 âˆ¨ 0 1 0 1 0 0 1 1 âˆ§ 0 1 0 1 15 âˆ¨ 35 15 âˆ§ 35 3Ã·4 <em>1 â—‹1 2</em>0.5 Â¯1<em>0.5 3</em>99 3<em>999</p>
<div class="h_tag">
<a href="#Booleans" id="Booleans" class="autoheader_anchor">
<h2>Booleans</h2>
</a>
</div>
<ul>
<li>Booleans are just numbers 0 and 1 (we saw this with <code>=</code>).</li>
<li>Knuth even called this â€œIverson's conventionâ€ in his paper â€œTwo Notes on Notationâ€ (https://www.maa.org/sites/default/files/pdf/upload_library/22/Ford/knuth403-422.pdf).</li>
<li>This allows useful tricks like <code>+/A&gt;0</code> (how many positive numbers in A?).</li>
<li>See Scholes's blog on Data-driven Conditionals (http://www.dyalog.com/blog/2014/10/data-driven-conditionals-2/).</li>
<li>(Morten Kromberg calls it loop-free programming.)</li>
<li>Coming back into fashion because of GPUs.</li>
</ul>
<p><strong>Exercise 07</strong> (boolean tricks):</p>
<p>Try:</p>
<p>Aâ†1 Â¯2 3 4 Â¯5 A&gt;0 (A&gt;0)/A 2 3 0/'XYZ' Bâ†0 1 0 1 1 0 0 1 B/â³â´B</p>
<div class="h_tag">
<a href="#Searching-and-Sorting" id="Searching-and-Sorting" class="autoheader_anchor">
<h2>Searching and Sorting</h2>
</a>
</div>
<p><strong>Exercise 07a</strong> (searching and sorting):</p>
<p>Try:</p>
<p>'THE CAT IN THE HAT'âˆŠ'AEIOU' 'AT'â·'THE CAT IN THE HAT' 'THE CAT IN THE HAT'~'AEIOU' 3 1 4 1 5 9 â³ 1 2 3 4 (3 3â´'CATHATSAT')â³2 3â´'HATMAT' 'ABCD'âˆª'DEFG' 'ABCD'âˆ©'DEFG' â‹piâ†3 1 4 1 5 9 pi[â‹pi]</p>
<div class="h_tag">
<a href="#Tour-De-Force-2-Index-Selfie" id="Tour-De-Force-2-Index-Selfie" class="autoheader_anchor">
<h2>Tour De Force 2: Index Selfie</h2>
</a>
</div>
<p>see file://Talks/Tour de Force/2.htm</p>
<div class="h_tag">
<a href="#Defined-functions" id="Defined-functions" class="autoheader_anchor">
<h2>Defined functions</h2>
</a>
</div>
<ul>
<li>Dyalog has anonymous (lambda-style) function definitions called <em>dfns</em>.</li>
<li>MANY examples: http://dfns.dyalog.com</li>
<li>Defined in braces, with <code>âº</code> and <code>âµ</code> standing for the arguments.</li>
<li>Functions have at most two arguments, but it's easy to make an argument tuple and decompose it with strand assignment.</li>
</ul>
<p><strong>Exercise 08</strong> (single line dfns):</p>
<p>Try:</p>
<p>{âº+âµ} 3{âº+âµ}4 3{âµ+âµ}4 {âµ+âµ}4 {âº+âº}4 whereâ†{âµ/â³â´âµ} where 0 1 0 1 1 0 0 1 discâ†{(a b c)â†âµ â‹„ (b<em>2)-4Ã—aÃ—c} disc 1 Â¯1 Â¯1 â (defining equation of the golden ratio)</p>
<ul>
<li>There is only one control structure: the guard.</li>
<li>Dfns consist of a single expression preceded by zero or more local definitions and guards.</li>
<li>At a pinch, you can use diamonds to separate â€œlinesâ€.</li>
<li>Use the <em>function editor</em> to define multi-line dfns. Hit ESC to exit the editor.</li>
<li>The current functions is denoted <code>âˆ‡</code> to facilitate simple recursion:</li>
</ul>
<p><strong>Exercise 09</strong> (multi-line dfns):</p>
<p>Try:</p>
<p>)ed sign signâ†{ âµ&lt;0:'negative' âµ&gt;0:'positive' 'zero' } sign 2 )ed fact factâ†{ âµ=0:1 âµÃ—âˆ‡ âµ-1 } fact 10 !10</p>
<ul>
<li>User defined functions can Just Work on arrays of arbitrary rank! See dfns.easter (http://dfns.dyalog.com/n_easter.htm)</li>
</ul>
<div class="h_tag">
<a href="#Operators" id="Operators" class="autoheader_anchor">
<h2>Operators</h2>
</a>
</div>
<p>+/1 2 3</p>
<ul>
<li><code>/</code> here is an operator called Reduce (or fold)</li>
<li>(Monadic) operators take a function operand on their <em>left</em>.</li>
<li>So <code>+/</code> is â€œplus reduceâ€, or â€œsumâ€.</li>
<li>Reduce inserts its operand function in the spaces: <code>1+2+3</code></li>
<li>Generalises in ways that are more useful than you might expect! (See http://www.dyalog.com/blog/2014/11/musings-on-reduction/)</li>
</ul>
<p><strong>Exercise 10</strong> (operators):</p>
<p>Try:</p>
<p>+/2 3 4 â â€œsummation overâ€ (KEI) Ã—/2 3 4 â â€œproduct overâ€ (KEI) âŒˆ/2 3 4 â‰ /1 0 1 1 â parity</p>
<ul>
<li><code>Â¨</code> (dieresis) is an operator called Each (or map):</li>
</ul>
<p>Try:</p>
<p>Aâ†'Jay' 'Foad' â´A â´Â¨A âŒ½A âŒ½Â¨A</p>
<ul>
<li><code>â¨</code> is an operator called Commute (see <em>Tacit programming</em>, later):</li>
</ul>
<p>Try:</p>
<p>2<em>3 2</em>â¨3 <em>â¨3</p>
<ul>
<li><em>Dyadic</em> operators also take an operand on the right.</li>
<li>All dyadic operators are left-associative (cf functions).</li>
<li><code>.</code> (dot) is a <em>dyadic</em> operator called Inner Product:</li>
</ul>
<p>Try:</p>
<p>1 2 3 +.Ã— 4 5 6 +/ 1 2 3 Ã— 4 5 6 Aâ†2 2â´1 2 3 4 A +.Ã— A +.Ã—â¨A â function vs operator binding makes this very neat +.Ã—/A A â´ (2 3 4â´â³24) +.Ã— (4 5 6â´â³120) â arbitrary ranks 0.5 <em>â¨ 3 4 5 +.</em> 2 â scalar extension 'ABC' âˆ¨.= 'APL'</p>
<ul>
<li>As a special case, left operand of <code>âˆ˜</code> gives Outer Product (or table):</li>
</ul>
<p>Try:</p>
<p>âˆ˜.+ â¨ â³4 â â€œaddition tableâ€ (KEI) âˆ˜.Ã— â¨ â³4 â â€œmultiplication tableâ€ (KEI) âˆ˜.âŒˆ â¨ â³4 â maximum table âˆ˜.= â¨ â³4 â identity matrix â´ (2 3â´â³6) âˆ˜.+ (4 5â´â³20) â arbitrary ranks</p>
<ul>
<li><code>â£</code> is a dyadic operator called power:</li>
</ul>
<p>Try:</p>
<p>({1+Ã·âµ}â£10)1 â one of the few times when you need parens! {1+Ã·âµ}â£â‰¡1</p>
<p><strong>Exercise 11a</strong> explain <code>âˆ¨.=</code> (et al) in words.</p>
<p><strong>Exercise 11b</strong> explain <code>âˆ¨.âˆ§</code> (used in transitive closure of a boolean matrix)</p>
<p>Operator muse:</p>
<ul>
<li>Operators take fns or arrays as operands; creates a 3-layer food chain
<ul>
<li>Order 0: array</li>
<li>Order 1: function, takes (array) <em>arguments</em></li>
<li>Order 2: operator, takes (array or function) <em>operands</em></li>
</ul></li>
<li>Functions are right-associative and monadic functions are prefix.</li>
<li>Operators are  left-associative and monadic operators are postfix.</li>
<li>Some kind of beautiful symmetry there.</li>
<li>(But it's not completely symmetrical, because the grammar distinguishes monadic/dyadic operators but not monadic/dyadic functions.)</li>
</ul>
<div class="h_tag">
<a href="#Thinking-arrays" id="Thinking-arrays" class="autoheader_anchor">
<h2>Thinking arrays</h2>
</a>
</div>
<ul>
<li>Use brace nesting depth as an example. First show a lisp-style recursive algorithm; then show how to do it a whole array at a time, bang!
<p>â Tail recursion:       brace1â†{         âºâ†â¬         0=â‰¢âµ:âº         (âº,1 Â¯1 0['()'â³âŠƒâµ]+âŠƒâŒ½âº)âˆ‡ 1â†“âµ       }</p>
<p>â Array thinking:       brace2â†{(+\âµ='(')-(+\âµ=')')}       brace3â†{+\1 Â¯1 0['()'â³âµ]}</p></li>
<li>Modern processors love arrays. Arthur Whitney recommended these videos:
<ul>
<li>Bjarne Stroustrup. Vector good. Linked list bad. https://www.youtube.com/watch?v=YQs6IC-vgmo</li>
<li>Mike Acton. Vector good. Struct &amp; object bad. https://www.youtube.com/watch?v=rX0ItVEVjHc</li>
</ul></li>
</ul>
<p><strong>Exercise</strong> Rainfall: https://medium.com/@bearsandsharks/i-failed-a-twitter-interview-52062fbb534b</p>
<p><strong>Exercise</strong> Luhn credit card checksum algorithm: https://en.wikipedia.org/wiki/Luhn_algorithm</p>
<div class="h_tag">
<a href="#Afternoon" id="Afternoon" class="autoheader_anchor">
<h1>Afternoon</h1>
</a>
</div>
<div class="h_tag">
<a href="#Reading-APL" id="Reading-APL" class="autoheader_anchor">
<h2>Reading APL</h2>
</a>
</div>
<p>(Powerpoint 11-14)</p>
<p>How to understand a line of APL: a detailed look at the game of life one-liner http://dfns.dyalog.com/n_life.htm</p>
<p>http://www.youtube.com/watch?v=a9xAKttWgP4</p>
<ul>
<li><code>lifeâ†{â†‘1 âµâˆ¨.âˆ§3 4=+/,Â¯1 0 1âˆ˜.âŠ–Â¯1 0 1âˆ˜.âŒ½âŠ‚âµ}</code></li>
<li>Try it out in small chunks, starting from the right.</li>
<li>Split it into <em>named</em> small chunks on several lines.</li>
<li>Know what's a function and what's an operator.</li>
<li>Note the creative use of inner product.</li>
<li>Finally try reading it from left to right.</li>
</ul>
<p><strong>Exercise 12</strong> (reading)</p>
<ul>
<li><code>(2Ã—a)Ã·â¨(-b)(+,-)0.5\*â¨(b*2)-4Ã—aÃ—c</code> (â€œ2 times a divided into minus b plus or minus the square root of [the discriminant] b squared minus 4 a câ€)</li>
<li>Find primes from 1 to R: <code>(~RâˆŠRâˆ˜.Ã—R)/Râ†1â†“â³R</code></li>
<li>Or <code>{(~RâˆŠRâˆ˜.Ã—R)/Râ†1â†“â³âµ}</code></li>
<li>Or <code>{{(~âµâˆŠâµâˆ˜.Ã—âµ)/âµ}1â†“â³âµ}</code></li>
<li>Or <code>{(~âµâˆŠâµâˆ˜.Ã—âµ)/âµ}âˆ˜{1â†“â³âµ}</code></li>
</ul>
<p>Quirks that you may notice:</p>
<ul>
<li>Some APL programmers like to avoid parentheses, to reduce the cognitive load!</li>
<li>Hence, put simple argument on left: <code>1+expr</code>, <code>0&lt;expr</code></li>
<li>Or, use Commute: <code>2*â¨...</code></li>
<li>N.B. game of life has no parentheses, partly because (some) primitives (e.g. Residue) were carefully designed to be most useful with a simple constant on the <em>left</em>.</li>
<li>See also <em>Code Golf</em>.</li>
</ul>
<div class="h_tag">
<a href="#Nested-arrays" id="Nested-arrays" class="autoheader_anchor">
<h2>Nested arrays</h2>
</a>
</div>
<ul>
<li>Enclose (monadic <code>âŠ‚</code>) boxes any array into a scalar enclosure.</li>
<li>First (monadic <code>âŠƒ</code>) is a handy inverse.</li>
<li>Enclose of a simple scalar is unchanged: turtles all the way down.</li>
<li>â´âŠ‚ is a handy idiom for constructing nested arrays: <code>3â´âŠ‚'Jay'</code>.</li>
<li>Depth of an array is the level of nesting (0 for simple scalar).</li>
<li>Mix and Split trade off rank for depth.</li>
<li>Prototypical items.</li>
</ul>
<div class="h_tag">
<a href="#Indexing-and-partial-assignment" id="Indexing-and-partial-assignment" class="autoheader_anchor">
<h2>Indexing and partial assignment</h2>
</a>
</div>
<p><strong>Exercise M1</strong> (indexing)</p>
<ul>
<li>Show Pick: <code>5âŠƒvec</code>, <code>(âŠ‚2 3)âŠƒmat</code></li>
<li>Show Squad: <code>5âŒ·vec</code>, <code>2 3âŒ·mat</code></li>
<li>Finally show the anomalous syntax for bracket indexing: <code>vec[5]</code>, <code>mat[2;3]</code></li>
<li>N.B. bracket indexing can't be used as an operand function :-(</li>
<li>Using an array <em>inside</em> the brackets can be very useful: <code>'.âŒ¹'[mat]</code></li>
<li>Indexed assignment works intuitively: <code>vec[3]â†99</code></li>
<li>N.B. arrays still have <strong>value</strong> semantics; other namings of the same array are <em>not</em> affected.</li>
<li>Selective assignment: <code>(3â†‘vec)â†4 5 6</code> <em>also</em> works intuitively!</li>
<li>But N.B. only for â€œstructuralâ€ primitive functions; you can't do <code>(0Ã—A)â†1</code>.</li>
</ul>
<div class="h_tag">
<a href="#Defined-operators" id="Defined-operators" class="autoheader_anchor">
<h2>Defined operators</h2>
</a>
</div>
<ul>
<li>Lambda-style operator definition with <code>âºâº</code> and <code>âµâµ</code>.</li>
<li>(Really defines the <em>derived function</em>, not the operator, because you have access to <code>âº</code> and <code>âµ</code> too.)</li>
</ul>
<div class="h_tag">
<a href="#Tour-De-Force-7-Quicksort" id="Tour-De-Force-7-Quicksort" class="autoheader_anchor">
<h2>Tour De Force 7: Quicksort</h2>
</a>
</div>
<p>see file://Talks/Tour de Force/7.htm</p>
<p><strong>Exercise 14</strong> (dops)</p>
<p>Try:</p>
<p>doubleâ†{2Ã—âµ} twiceâ†{âºâº âºâº âµ} double twice 3</p>
<div class="h_tag">
<a href="#Rank" id="Rank" class="autoheader_anchor">
<h2>Rank</h2>
</a>
</div>
<p><strong>Exercise R1</strong> (rank)</p>
<p>Try:</p>
<p>â ensure ]box on in your session â•ioâ†0</p>
<p>â rank with a monadic function</p>
<p>xâ†2 3 5â´â³30 x âŠ‚â¤1 âŠ¢x âŠ‚â¤2 âŠ¢x âŠ‚â¤3 âŠ¢x âŠ‚â¤0 âŠ¢x â âŠ‚ on a simple scalar (rank 0 array) is that scalar itself</p>
<p>âŠ‚â¤Â¯1 âŠ¢x (âŠ‚â¤Â¯1 âŠ¢x) â‰¡ âŠ‚â¤2 âŠ¢x (âŠ‚â¤Â¯1 âŠ¢x) â‰¡ âŠ‚â¤((â‰¢â´x)-1) âŠ¢x â‰¢â´x (â‰¢â´x)-1</p>
<p>âŠ‚â¤Â¯1 âŠ¢5 2â´â³10 âŠ‚â¤Â¯1 âŠ¢5 2 3â´â³60 âŠ‚â¤Â¯1 âŠ¢5 2 3 4â´â³120 âŠ‚â¤Â¯1 âŠ¢5 2 3 2 2â´â³120</p>
<p>aâ†2 3 4â´â•a a âŠ‚â¤1 âŠ¢a âŠ‚â¤2 âŠ¢a âŠ‚â¤3 âŠ¢a âŠ‚â¤0 âŠ¢a</p>
<p>âŠ‚â¤Â¯1 âŠ¢a</p>
<p>And:</p>
<p><strong>Exercise R2</strong> (rank)</p>
<p>xâ†3 5â´â•a x yâ†3 6â´â³18 y</p>
<p>x {âºâµ}â¤1 âŠ¢y x {âºâµ}â¤1 1 âŠ¢y x {âºâµ}â¤1 2 âŠ¢y x {âºâµ}â¤2 1 âŠ¢y x {âºâµ}â¤0 2 âŠ¢y âŠ‚â¤2 âŠ¢x {âºâµ}â¤0 2 âŠ¢y x {âºâµ}â¤2 0 âŠ¢y âŠ‚â¤2 âŠ¢x {âºâµ}â¤2 0 âŠ¢y</p>
<div class="h_tag">
<a href="#Key" id="Key" class="autoheader_anchor">
<h2>Key</h2>
</a>
</div>
<p><strong>Exercise R3</strong> (key)</p>
<p>Try:</p>
<p>â ensure ]box on in your session â•ioâ†0</p>
<p>xâ†'Mississippi' {âº,â‰¢âµ}âŒ¸x {âº,â‰¢âµ}âŒ¸2/x {âº,â‰¢âµ}âŒ¸3/x x{âºâµ}âŒ¸â³â‰¢x</p>
<p>â•rlâ†7<em>5 â set random seed to get reproducible random numbers</p>
<p>xâ†('zero' 'one' 'two' 'three' 'four')[?20â´5] x yâ†?20â´10 y x {âºâµ}âŒ¸ y x {âº,â‰¢âµ}âŒ¸ y x {âº,+âŒ¿âµ}âŒ¸ y x {âº,âŒˆâŒ¿âµ}âŒ¸ y x {âº,âŒŠâŒ¿âµ}âŒ¸ y x {âº,(+âŒ¿Ã·â‰¢)âµ}âŒ¸ y</p>
<p>x {âŠ‚âµ}âŒ¸ y x {+/âµ}âŒ¸ y</p>
<p>yâ†?20 3â´10 x {âºâµ}âŒ¸ y x {âº,âŠ‚+âŒ¿âµ}âŒ¸ y</p>
<div class="h_tag">
<a href="#Procedures" id="Procedures" class="autoheader_anchor">
<h2>Procedures</h2>
</a>
</div>
<p>(Powerpoint, 15-18)</p>
<blockquote>
<p>Unfortunately, however, APL still splits programming into a world of expressions and a world of statements. Thus the effort to write one-line programs is partly motivated by the desire to stay in the more orderly world of expressions. â€“John Backus, â€œCan Programming Be Liberated from the von Neumann Style?â€</p>
</blockquote>
<ul>
<li>APL had tradfns long before dfns.</li>
<li>The only control flow was <code>â†’</code> (goto).</li>
<li>Control structures (<code>:If</code> etc) improved life a little.</li>
<li>Variables had dynamic scope.</li>
</ul>
<div class="h_tag">
<a href="#Error-trapping" id="Error-trapping" class="autoheader_anchor">
<h2>Error trapping</h2>
</a>
</div>
<p>(Powerpoint 19-23)</p>
<ul>
<li>Error guards in dfns.</li>
<li><code>:Trap</code> in tradfns.</li>
</ul>
<div class="h_tag">
<a href="#Interactive-debugging" id="Interactive-debugging" class="autoheader_anchor">
<h2>Interactive debugging</h2>
</a>
</div>
<ul>
<li>Using the tracer to step through code.</li>
<li>Using the session to examine variables.</li>
<li>Edit windows on variables show live updates.</li>
</ul>
<div class="h_tag">
<a href="#Schisms" id="Schisms" class="autoheader_anchor">
<h2>Schisms</h2>
</a>
</div>
<blockquote>
<p>â€œShould array indices start at 0 or 1? My compromise of 0.5 was rejected without, I thought, proper consideration.â€ â€“Stan Kelly Bootle</p>
</blockquote>
<ul>
<li>Index origin can be 0 or 1 (everyone agrees it shouldn't be settable, but they don't agree what it should be).</li>
<li>Floating vs grounded array theory.</li>
<li>APL2 (axis â€œoperatorâ€) vs Rationalised APL (rank operator).</li>
</ul>
<div class="h_tag">
<a href="#Tacit-programming" id="Tacit-programming" class="autoheader_anchor">
<h2>Tacit programming</h2>
</a>
</div>
<ul>
<li>https://en.wikipedia.org/wiki/Tacit_programming</li>
<li>Syntax of function trains (need some compelling examples)</li>
<li>Tacit or â€œpoint freeâ€ forms:
<ul>
<li>Compose</li>
<li>Commute</li>
<li>Atop</li>
<li>Fork</li>
<li>Right operand currying</li>
</ul></li>
</ul>
<p><strong>Exercise 15</strong> (tacit)</p>
<p>(âˆ¨/ â‰¤ âˆ§/) booleanvector</p>
<p>(Answer: it checks for all zeros OR all ones.)</p>
<div class="h_tag">
<a href="#Namespaces" id="Namespaces" class="autoheader_anchor">
<h2>Namespaces</h2>
</a>
</div>
<ul>
<li>Whatâ€™s an array, revised:
<ul>
<li>Rectangular collection of items,</li>
<li>arranged along zero or more orthogonal axes,</li>
<li>of numbers, characters, arrays <strong>and refs</strong>.</li>
</ul></li>
</ul>
<p><strong>Exercise 16</strong> (namespaces)</p>
<p>Try:</p>
<p>ns1â†â•NS '' ns1.xâ†42 ns1.x ns1.(x+x) ns1.(doubleâ†{âµ+âµ}) ns1.(double x) ns1.double x ns1.double 17 ns2â†â•NS '' ns2.xâ†99 namespacesâ†ns2 ns2 â‰¢namespaces namespaces.(x+x) (âŒ½namespaces).(x+x)</p>
<div class="h_tag">
<a href="#System-functions" id="System-functions" class="autoheader_anchor">
<h2>System functions</h2>
</a>
</div>
<p><strong>Exercise M2</strong> (sysfns)</p>
<ul>
<li>Provide I/O, system interfaces etc. Roughly equivalent to C standard library.</li>
<li>Mention <code>â•FREAD</code>, <code>â•NREAD</code>, <code>â•XML</code>, <code>â•R</code>/<code>â•S</code>, â€¦</li>
</ul>
<div class="h_tag">
<a href="#Building-applications" id="Building-applications" class="autoheader_anchor">
<h2>Building applications</h2>
</a>
</div>
<ul>
<li>Turn one of our exercises into a web page or service with MiServer ?</li>
</ul>
</body>
</html>